<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="title icon" href="images/title-img png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script defer src="https://use.fontawesome.com/releases/v5.12.1/js/all.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <!-- TEST JSON -->
    <script>
        let json = {
            "chatbots": [{
                    "Metadata": {
                        "chatbotID": 48732,
                        "UserID": 19935,
                        "name": "Pizza Place",
                        "settings": {
                            "onboarding": "Intent-ID",
                            "icon": "pizzaIcon",
                            "delay": null,
                            "typingSymbol": null,
                            "isActive": true
                        }
                    },
                    "Content": {
                        "globals": [{
                            "globalID": null,
                            "text": null,
                            "isActive": false,
                            "delay": 2,
                            "richInteractions": [{
                                "id": 5,
                                "data": null,
                                "dataType": "Picture/Button/Textfile/etc.",
                                "showData": true
                            }]
                        }],
                        "fallbacks": [{
                            "fallbackID": 1,
                            "textPool": [
                                "Das habe ich leider nicht verstanden. Könnten Sie das wiederholen?"
                            ],
                            "Text": 0,
                            "isActive": false,
                            "delay": 2,
                            "Successor": "ursprüngliche Dialog-ID",
                            "richInteractions": [{
                                "id": 5,
                                "data": null,
                                "mimeType": "Picture/Button/Textfile/etc.",
                                "showData": true
                            }]
                        }],
                        "intents (Konversationen)": [{
                            "intentID": null,
                            "topic": "Email",
                            "icon": "exclamation mark",
                            "isActive": false,
                            "isOnboarding": true,
                            "predecessor": null,
                            "successor": [
                                1422,
                                8723
                            ],
                            "dialogs": [{
                                "dialogID": 1,
                                "textPool": [
                                    "Kann ich sie haben?",
                                    "Kriege ich deine Adresse?"
                                ],
                                "chosenText": null,
                                "possibleAnswers": [],
                                "answerType": "global/lokal",
                                "isActive": false,
                                "type": "question",
                                "delay": 2,
                                "possibleSuccessorDialogs": [
                                    5,
                                    6
                                ],
                                "forwarding": null,
                                "triggerNotification": "notificationID",
                                "richInteractions": [{
                                    "id": 5,
                                    "data": null,
                                    "mimeType": "Picture/Textfile/Video/etc.",
                                    "showData": true
                                }],
                                "slot (Entities)": [{
                                    "slotID": null,
                                    "slotName": null,
                                    "required": true,
                                    "isActive": false,
                                    "comment": null
                                }]
                            }]
                        }]
                    }
                },
                {
                    "Metadata": {
                        "chatbotID": 48732,
                        "UserID": 19935,
                        "name": "Pizza Place",
                        "settings": {
                            "onboarding": "Intent-ID",
                            "icon": "pizzaIcon",
                            "delay": null,
                            "typingSymbol": null,
                            "isActive": true
                        }
                    },
                    "Content": {
                        "globals": [{
                            "globalID": null,
                            "text": null,
                            "isActive": false,
                            "delay": 2,
                            "richInteractions": [{
                                "id": 5,
                                "data": null,
                                "dataType": "Picture/Button/Textfile/etc.",
                                "showData": true
                            }]
                        }],
                        "fallbacks": [{
                            "fallbackID": 1,
                            "textPool": [
                                "Das habe ich leider nicht verstanden. Könnten Sie das wiederholen?"
                            ],
                            "Text": 0,
                            "isActive": false,
                            "delay": 2,
                            "Successor": "ursprüngliche Dialog-ID",
                            "richInteractions": [{
                                "id": 5,
                                "data": null,
                                "mimeType": "Picture/Button/Textfile/etc.",
                                "showData": true
                            }]
                        }],
                        "intents (Konversationen)": [{
                            "intentID": null,
                            "topic": "Email",
                            "icon": "exclamation mark",
                            "isActive": false,
                            "isOnboarding": true,
                            "predecessor": null,
                            "successor": [
                                1422,
                                8723
                            ],
                            "dialogs": [{
                                "dialogID": 1,
                                "textPool": [
                                    "Kann ich sie haben?",
                                    "Kriege ich deine Adresse?"
                                ],
                                "chosenText": null,
                                "possibleAnswers": [],
                                "answerType": "global/lokal",
                                "isActive": false,
                                "type": "question",
                                "delay": 2,
                                "possibleSuccessorDialogs": [
                                    5,
                                    6
                                ],
                                "forwarding": null,
                                "triggerNotification": "notificationID",
                                "richInteractions": [{
                                    "id": 5,
                                    "data": null,
                                    "mimeType": "Picture/Textfile/Video/etc.",
                                    "showData": true
                                }],
                                "slot (Entities)": [{
                                    "slotID": null,
                                    "slotName": null,
                                    "required": true,
                                    "isActive": false,
                                    "comment": null
                                }]
                            }]
                        }]
                    }
                }
            ]
        }

        console.log('name', json["chatbots"][0]['Metadata'].name);
        console.log('Anzahl Intents', json["chatbots"][0]['Content']['intents (Konversationen)'].length);
        console.log(json);
    </script>
    <title>Dashboard</title>
</head>

<body>
    <!-- Navbar -->
    <div class="container-fluid">
        <div class="row">
            <!-- sidebar -->
            <div class="col-2 sidebar fixed-top d-none d-sm-none d-lg-block" id="navbarNav">
                <div class="bottom-border pt-4">
                    <h3 href=#" id="bot-title" class="text-dark" onclick="Sidebar.EditBotTitle()">
                        Neuer Chatbot
                        <span class="badge badge-warning float-right"><i class="fas fa-pen"></i></span>
                    </h3>
                    <div id="bot-title-edit" class="input-group mb-3">
                        <input type="text" class="form-control" placeholder="Neuer Titel..." aria-label="Neuer Titel..."
                            aria-describedby="titel-save">
                        <div class="input-group-append">
                            <button class="btn btn-outline-success" type="button" onclick="Sidebar.SaveBotTitle()"
                                id="titel-save"><i class="fas fa-check"></i></button>
                            <button class="btn btn-outline-danger" type="button" onclick="Sidebar.CloseBotEdit()"
                                id="titel-cancel"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                </div>

                <ul class="navbar-nav flex-column mt-4">
                    <li class="nav-item p-2 bg-white shadow rounded">
                        <div class="nav-link p-3 mb-2">
                            <i class="far fa-image fa-lg mr-3"></i>
                            <b class="text-dark">Profilbild</b>
                            <!-- Upload image -->
                            <div id="IconUploadWrapper" class="mb-4 mt-4">
                                <form runat="server" class="dropzone">
                                    <div class="form-group text-center">
                                        <label class="p-2 btn btn-primary" for="FileInput">
                                            <i class="fas fa-upload"></i>
                                            <b>Dateiupload</b>
                                        </label>
                                        <input type="file" id="FileInput" class="form-control-file"
                                            style="display:none; border: 1px solid #d2d2d2;box-shadow: 0px 0px 1px 0px darkgrey;border-radius: 5px;">
                                    </div>
                                </form>
                            </div>
                            <!-- End of upload image  -->
                        </div>
                        <!-- <select id="IconSelect" class="browser-default custom-select mb-4"
                            onchange="Sidebar.botIcon(1)">
                            <option selected>---</option>
                            <option value="1">Ausrufezeichen</option>
                            <option value="2">Smiley</option>
                            <option value="3">Mond</option>
                            <option value="4">Haus</option>
                            <option value="5">Besteck</option>
                            <option value="6">Profil</option>
                            <option value="7">Brief</option>
                        </select> -->
                    </li>
                    <li class="text-center nav-item pt-4">
                        <a href="./topics.html">
                            <button type="button" class="btn btn-sm btn-block btn-info mb-4">
                                Chatbot ansehen
                            </button>
                        </a>
                    </li>
                    <li class="text-center nav-item pt-4">
                        <button type="button" class="btn btn-sm btn-danger mb-4" data-toggle="modal"
                            data-target="#delete">
                            Löschen
                        </button>
                        <button type="button" class="btn btn-sm btn-success mb-4">
                            Speichern
                        </button>
                    </li>
                </ul>
            </div>


            <!-- end of sidebar -->
        </div>
    </div>
    </div>
    <!-- End of Navbar-->

    <!-- Legend modal -->
    <div class="modal" tabindex="-1" role="dialog" id="legend">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Legende</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th scope="col">Icon</th>
                                <th scope="col">Name</th>
                                <th scope="col">Beschreibung</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">
                                    <i class="far fa-image"></i>
                                </th>
                                <td>Profilbild</td>
                                <td>Dateiupload für ein Profilbild</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="fas fa-pen"></i>
                                </th>
                                <td>Bearbeiten</td>
                                <td>Abänderung von Inhalten</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="fas fa-trash-alt"></i>
                                </th>
                                <td>Entfernen</td>
                                <td>Löscht das entsprechende Element</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="fas fa-eye"></i>
                                </th>
                                <td>Views</td>
                                <td>Gibt an, wie oft mit dem Bot interagiert wurde</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="far fa-list-alt"></i>
                                </th>
                                <td>Gesamtansicht</td>
                                <td>Öffnet eine Visualisierung der gesamten Chatbotstruktur</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="fas fa-redo"></i>
                                </th>
                                <td>Max. Wiederholungen</td>
                                <td>Gibt an, wie oft ein Text vom Chatbot höchstens wiederholt wird</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="far fa-clock"></i>
                                </th>
                                <td>Delay</td>
                                <td>Gibt Verzögerung an, bevor Text ausgegeben wird</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="fas fa-square"></i>
                                </th>
                                <td>Typ</td>
                                <td>Der Typ eines Texts kann eine Nachricht, eine Frage oder eine Button-Gruppe sein
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="far fa-circle"></i>
                                </th>
                                <td>Slots</td>
                                <td>Gibt der Nachricht einen Slot mitsamt optionaler Beschreibung, der befüllt werden
                                    soll</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="fas fa-forward"></i>
                                </th>
                                <td>Mögl. Nachfolger</td>
                                <td>Alle Nachrichten, die auf die aktuelle folgen könnten. Zu jedem Nachfolger wird eine
                                    <b>Bedingung</b> angegeben</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="fa fa-arrow-down"></i>
                                </th>
                                <td>Bedingung</td>
                                <td>Nutzereingaben, die zu einem <b>möglichen Nachfolger</b> führen</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="fas fa-comment"></i>
                                </th>
                                <td>Text-Pool</td>
                                <td>Menge aus Texten, aus denen zufällig gewählt wird, welchen der Bot in der
                                    entsprechenden Nachricht an den Nutzer schickt</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <i class="fas fa-plus-square"></i>
                                </th>
                                <td>Hinzufügen</td>
                                <td>Fügt ein neues Element der entsprechenden Menge hinzu</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" data-dismiss="modal">Schließen</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End of legend modal -->

    <!-- Log out modal -->
    <div class="modal" tabindex="-1" role="dialog" id="sign-out">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ausloggen?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Modal body text goes here.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger">Ja</button>
                    <button type="button" class="btn btn-success" data-dismiss="modal">Bleiben</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end of log out modal -->

    <!-- Delete modal -->
    <div class="modal" tabindex="-1" role="dialog" id="delete">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chatbot <b>Studierfähigkeit</b> löschen?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Die daten gehen unwiderruflich verloren!</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger">Löschen</button>
                    <button type="button" class="btn btn-success" data-dismiss="modal">Abbrechen</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End of delete modal -->

    <!-- cards-->

    <section>
        <div class="container-fluid float-right col-lg-10 col-12 pl-0 pr-0">
            <!-- Topnav -->
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
                    aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <!-- Breadcrumbs -->
                <nav aria-label="breadcrumb">
                    <ol class="ml-5 breadcrumb">
                        <li class="breadcrumb-item active" aria-current="page">Chatbot</li>
                    </ol>
                </nav>
                <!-- End of breadcrumbs -->
                <!-- Navbar -->
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                        <li class="nav-item">
                            <a href="#" class="nav-link text-dark p-3 mb-2 sidebar-link">
                                <i class="far fa-user text-dark fa-lg mr-3"></i>
                                Benutzerkonto
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-dark p-3 mb-2 sidebar-link">
                                <i class="far fa-file-alt text-dark fa-lg mr-3"></i>
                                Dokumentation
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-dark p-3 mb-2 sidebar-link">
                                <i class="far fa-question-circle text-dark fa-lg mr-3"></i>
                                Hilfe
                            </a>
                        </li>
                        <li class="nav-item">
                            <div style="cursor: pointer;" class="nav-link text-dark p-3 mb-2 sidebar-link"
                                data-toggle="modal" data-target="#legend">
                                <i class="fas fa-exclamation text-dark fa-lg mr-3"></i>
                                Legende
                            </div>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-dark p-3 mb-2 sidebar-link" data-toggle="modal"
                                data-target="#sign-out"">
                  <i class=" fas fa-sign-out-alt text-dark fa-lg mr-3"></i>
                                Ausloggen
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- End of navbar -->
            </nav>
            <!-- End of topnav -->
            <div class="row">
                <div class="col-xl-10 col-lg-9 col-md-12 m-auto" id="botWrapper">
                    <div id="botList" class="row pt-md-5 mt-md-3 mb-5">
                        <div class="topic-card col-xl-3 col-sm-4 p-2">
                            <a style="text-decoration:none;">
                                <div id="Bot_1" class="card card-common" onclick="BotFactory.show(this)">
                                    <span class="badge badge-info">1</span>
                                    <div class="card-body">
                                        <div class="display-flex justify-content-between">
                                            <div class="text-right text-secondary">
                                                <h5>Neuer Chatbot</h5>
                                                <h6>5 Konversationen</h6>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer text-secondary">
                                        <i class="fas fa-eye mr-3"></i>
                                        <span>135</span>
                                        <button class="btn bg-white border-warning float-right">
                                            <i class="far fa-list-alt "></i>
                                        </button>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="topic-card col-xl-3 col-sm-4 p-2">
                            <div class="card card-common" onclick="BotFactory.show(this)">
                                <span class="badge badge-info">2</span>
                                <div class="card-body">
                                    <div class="display-flex justify-content-between">
                                        <div class="text-right text-secondary">
                                            <h5>Studiumsevaluation</h5>
                                            <h6>10 Konversationen</h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer text-secondary">
                                    <i class="fas fa-eye mr-3"></i>
                                    <span>341</span>
                                    <button class="btn bg-white border-warning float-right">
                                        <i class="far fa-list-alt "></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="topic-card col-xl-3 col-sm-4 p-2">
                            <div class="card card-common" onclick="BotFactory.show(this)">
                                <span class="badge badge-info">3</span>
                                <div class="card-body">
                                    <div class="display-flex justify-content-between">
                                        <div class="text-right text-secondary">
                                            <h5>Rückmeldung</h5>
                                            <h6>1 Konversationen</h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer text-secondary">
                                    <i class="fas fa-eye mr-3"></i>
                                    <span>29</span>
                                    <button class="btn bg-white border-warning float-right">
                                        <i class="far fa-list-alt "></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="topic-card col-xl-3 col-sm-4 p-2">
                            <div class="card card-common" onclick="BotFactory.show(this)">
                                <span class="badge badge-info">4</span>
                                <div class="card-body">
                                    <div class="display-flex justify-content-between">
                                        <div class="text-right text-secondary">
                                            <h5>Umfrage BayernMint</h5>
                                            <h6>15 Konversationen</h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer text-secondary">
                                    <i class="fas fa-eye mr-3"></i>
                                    <span>477</span>
                                    <button class="btn bg-white border-warning float-right">
                                        <i class="far fa-list-alt "></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="topic-card col-xl-3 col-sm-4 p-2">
                            <div class="card card-common" onclick="BotFactory.show(this)">
                                <span class="badge badge-info">5</span>
                                <div class="card-body">
                                    <div class="display-flex justify-content-between">
                                        <div class="text-right text-secondary">
                                            <h5>Sicherheitsunterweisung</h5>
                                            <h6>8 Konversationen</h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer text-secondary">
                                    <i class="fas fa-eye mr-3"></i>
                                    <span>36</span>
                                    <button class="btn bg-white border-warning float-right">
                                        <i class="far fa-list-alt "></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div id="botPlus" class="topic-card col-xl-3 col-sm-4 p-2" onclick="BotFactory.add()">
                            <div class="card card-common bg-warning">
                                <div class="card-body">
                                    <div class="display-flex text-center">
                                        <i class="fas fa-plus fa-3x" style="color: #eee;"></i>
                                        <h6>&nbsp;</h6>
                                    </div>
                                </div>
                                <div class="card-footer text-center">
                                    <b>Neuen Chatbot anlegen</b>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- end of cards -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
    </script>
    <script src="https://raw.githack.com/SortableJS/Sortable/master/Sortable.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-sortablejs@latest/jquery-sortable.js"></script>
    <script>
        Sortable.create(botList, {
            /* options */
        });
    </script>

    <script src="script.js"></script>
    <script src="js/sideBar.js"></script>
    <script src="js/addBlocks.js"></script>
    <script src="js/entities.js"></script>
</body>

</html>